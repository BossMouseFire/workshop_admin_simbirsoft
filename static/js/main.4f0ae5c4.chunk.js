(this["webpackJsonppractic-simbirsoft-admin"]=this["webpackJsonppractic-simbirsoft-admin"]||[]).push([[0],{4:function(t,e,a){t.exports={authPage:"authPage_authPage__1mJjn",blockAuth:"authPage_blockAuth__1Pnxh",blockName:"authPage_blockName__2sABb",formAuth:"authPage_formAuth__yj3ay",formAuthName:"authPage_formAuthName__3hbZc",blockInputData:"authPage_blockInputData__3Oft0",errorInput:"authPage_errorInput__kWXmD",blockActions:"authPage_blockActions__FkpIw",disableButtonLogin:"authPage_disableButtonLogin__1rEEf",formAuthLoading:"authPage_formAuthLoading__1gYU8",errorAuth:"authPage_errorAuth__1nTS3",errorAuthActive:"authPage_errorAuthActive__2mU9v",loader:"authPage_loader__3_8AJ"}},43:function(t,e,a){},73:function(t,e,a){"use strict";a.r(e);var n,c=a(0),r=a.n(c),i=a(21),o=a.n(i),s=(a(43),a(3)),u=a(4),h=a.n(u),d=a.p+"static/media/logo.bc4f3ee8.svg",l=a(17),j=a(10),b=a(16),O=a.n(b),p=a(25);!function(t){t.AUTH_LOADING="AUTH_LOADING",t.AUTH_LOGIN_SUCCESS="AUTH_LOGIN_SUCCESS",t.AUTH_LOGIN_ERROR="AUTH_ERROR",t.AUTH_CHECK_SUCCESS="AUTH_CHECK_SUCCESS",t.AUTH_CHECK_ERROR="AUTH_CHECK_ERROR"}(n||(n={}));var _=a(36),A=function(){var t=btoa("".concat(f(),":4cbcea96de"));return"Basic ".concat(t)},f=function(){for(var t="";!t;)t=Math.random().toString(36).substring(7);return t},m=function(t,e){var a=new Date;a.setTime(a.getTime()+6048e5),document.cookie="".concat(t,"=").concat(e,"; expires=").concat(a.toUTCString(),"; path=/")},g=a.n(_).a.create({baseURL:"https://api-factory.simbirsoft1.com/api",headers:{"X-Api-Factory-Application-Id":"5e25c641099b810b946c5d5b","Access-Control-Allow-Origin":"*"}}),v=function(t,e){return g.post("/auth/login",{username:t,password:e},{headers:{Authorization:A()}})},x=function(){var t=function(t){var e=("; "+document.cookie).split("; "+t+"=");if(2==e.length){var a=e.pop();return null===a||void 0===a?void 0:a.split(";").shift()}}("accessToken");if(t)return g.get("/auth/check",{headers:{Authorization:t}});throw new Error("\u041f\u043e\u043b\u0443\u0447\u0435\u043d \u043f\u0443\u0441\u0442\u043e\u0439 \u0442\u043e\u043a\u0435\u043d")},C=j.c,U=a(12),N=a.n(U),S=a(22),k=a.n(S),E=a(1),H=k.a.bind(h.a),T=function(){var t=Object(c.useState)(""),e=Object(l.a)(t,2),a=e[0],r=e[1],i=Object(c.useState)(""),o=Object(l.a)(i,2),s=o[0],u=o[1],d=Object(c.useState)(!1),b=Object(l.a)(d,2),_=b[0],A=b[1],f=Object(c.useState)(!1),g=Object(l.a)(f,2),x=g[0],U=g[1],S=Object(j.b)(),k=C((function(t){return t.auth})),T=k.loading,R=k.error;Object(c.useEffect)((function(){R&&(A(!0),U(!0))}),[R]);return Object(E.jsxs)("div",{className:h.a.formAuth,children:[Object(E.jsx)("span",{className:h.a.formAuthName,children:"\u0412\u0445\u043e\u0434"}),Object(E.jsxs)("div",{className:h.a.blockInputData,children:[Object(E.jsx)("span",{children:"\u041b\u043e\u0433\u0438\u043d"}),Object(E.jsx)("input",{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d",className:N()(H({errorInput:_})),onChange:function(t){r(t.target.value),_&&A(!1)}})]}),Object(E.jsxs)("div",{className:h.a.blockInputData,children:[Object(E.jsx)("span",{children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(E.jsx)("input",{type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",className:N()(H({errorInput:x})),onChange:function(t){u(t.target.value),x&&U(!1)}})]}),Object(E.jsxs)("div",{className:h.a.blockActions,children:[Object(E.jsx)("div",{children:"\u0417\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f"}),Object(E.jsx)("div",{className:N()(H({disableButtonLogin:T})),onClick:function(){a||A(!0),s||U(!0),a&&s&&S(function(t,e){return function(){var a=Object(p.a)(O.a.mark((function a(c){var r,i,o;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c({type:n.AUTH_LOADING}),a.next=4,v(t,e);case 4:r=a.sent,i=r.data.token_type[0].toUpperCase()+r.data.token_type.slice(1),o="".concat(i," ").concat(r.data.access_token),m("accessToken",o),c({type:n.AUTH_LOGIN_SUCCESS,payload:{isAuthenticated:!0,dataAuth:r.data}}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),c({type:n.AUTH_LOGIN_ERROR,payload:a.t0});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(t){return a.apply(this,arguments)}}()}(a,s))},children:"\u0412\u043e\u0439\u0442\u0438"})]}),T&&Object(E.jsx)("div",{className:h.a.formAuthLoading,children:Object(E.jsxs)("div",{className:h.a.loader,children:[Object(E.jsx)("div",{}),Object(E.jsx)("div",{}),Object(E.jsx)("div",{}),Object(E.jsx)("div",{})]})})]})},R=k.a.bind(h.a),I=function(){var t=C((function(t){return t.auth})).error;return Object(E.jsxs)("div",{className:h.a.authPage,children:[Object(E.jsxs)("div",{className:h.a.blockAuth,children:[Object(E.jsxs)("div",{className:h.a.blockName,children:[Object(E.jsx)("img",{src:d,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"}),Object(E.jsx)("span",{children:"Need for drive"})]}),Object(E.jsx)(T,{})]}),Object(E.jsx)("div",{className:N()(h.a.errorAuth,R({errorAuthActive:t})),children:"\u041f\u0440\u043e\u0438\u0437\u043e\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0437\u0430\u043d\u043e\u0432\u043e."})]})},y=function(t){var e=t.children,a=t.isAuthenticated,n=t.path;return Object(E.jsx)(s.b,{path:n,render:function(t){var n=t.location;return a?Object(E.jsx)(s.a,{to:{pathname:"/admin",state:{from:n}}}):e}})},L=function(t){var e=t.children,a=t.isAuthenticated,n=t.path;return Object(E.jsx)(s.b,{path:n,render:function(t){var n=t.location;return a?e:Object(E.jsx)(s.a,{to:{pathname:"/login",state:{from:n}}})}})},P=function(){return Object(E.jsx)("div",{children:Object(E.jsx)("h1",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"})})},w=function(){var t=Object(j.b)(),e=C((function(t){return t.auth})).isAuthenticated;return Object(c.useEffect)((function(){t(function(){var t=Object(p.a)(O.a.mark((function t(e){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e({type:n.AUTH_LOADING}),t.next=4,x();case 4:e({type:n.AUTH_CHECK_SUCCESS}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e({type:n.AUTH_CHECK_ERROR});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}())}),[e]),Object(E.jsxs)(s.d,{children:[Object(E.jsx)(y,{path:"/login",isAuthenticated:e,children:Object(E.jsx)(I,{})}),Object(E.jsx)(L,{path:"/admin",isAuthenticated:e,children:Object(E.jsx)(P,{})}),Object(E.jsx)(s.a,{to:"/login"})]})},D=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,74)).then((function(e){var a=e.getCLS,n=e.getFID,c=e.getFCP,r=e.getLCP,i=e.getTTFB;a(t),n(t),c(t),r(t),i(t)}))},G=a(13),K=a(15),B=a(38),F=a(18),J={isAuthenticated:!1,dataAuth:{},loading:!1,error:null},z=Object(K.b)({auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case n.AUTH_LOADING:return Object(F.a)(Object(F.a)({},t),{},{loading:!0});case n.AUTH_LOGIN_SUCCESS:return{isAuthenticated:e.payload.isAuthenticated,dataAuth:e.payload.dataAuth,loading:!1,error:null};case n.AUTH_LOGIN_ERROR:return{isAuthenticated:!1,dataAuth:{},loading:!1,error:e.payload};case n.AUTH_CHECK_SUCCESS:return Object(F.a)(Object(F.a)({},t),{},{isAuthenticated:!0});case n.AUTH_CHECK_ERROR:return{isAuthenticated:!1,dataAuth:{},loading:!1,error:null};default:return t}}}),M=Object(K.c)(z,Object(K.a)(B.a));o.a.render(Object(E.jsx)(r.a.StrictMode,{children:Object(E.jsx)(G.a,{children:Object(E.jsx)(j.a,{store:M,children:Object(E.jsx)(w,{})})})}),document.getElementById("root")),D()}},[[73,1,2]]]);
//# sourceMappingURL=main.4f0ae5c4.chunk.js.map