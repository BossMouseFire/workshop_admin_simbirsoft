(this["webpackJsonppractic-simbirsoft-admin"]=this["webpackJsonppractic-simbirsoft-admin"]||[]).push([[0],{3:function(t,e,c){t.exports={authPage:"authPage_authPage__1mJjn",blockAuth:"authPage_blockAuth__1Pnxh",blockName:"authPage_blockName__2sABb",formAuth:"authPage_formAuth__yj3ay",formAuthName:"authPage_formAuthName__3hbZc",blockInputData:"authPage_blockInputData__3Oft0",errorInput:"authPage_errorInput__kWXmD",blockActions:"authPage_blockActions__FkpIw",errorAuth:"authPage_errorAuth__1nTS3",errorAuthActive:"authPage_errorAuthActive__2mU9v"}},34:function(t,e,c){},62:function(t,e,c){"use strict";c.r(e);var a=c(0),n=c.n(a),r=c(26),s=c.n(r),o=(c(34),c(12)),i=c(2),u=c(3),h=c.n(u),l=c.p+"static/media/logo.bc4f3ee8.svg",d=c(27),j=function(){var t=btoa("".concat(b(),":4cbcea96de"));return"Basic ".concat(t)},b=function(){for(var t="";!t;)t=Math.random().toString(36).substring(7);return t},p=c.n(d).a.create({baseURL:"https://api-factory.simbirsoft1.com/api",headers:{"X-Api-Factory-Application-Id":"5e25c641099b810b946c5d5b","Access-Control-Allow-Origin":"*"}}),f=function(){var t=function(t){var e=("; "+document.cookie).split("; "+t+"=");if(2==e.length){var c=e.pop();return null===c||void 0===c?void 0:c.split(";").shift()}}("accessToken");return t?p.get("/auth/check",{headers:{Authorization:t}}):null},m=c(1),O=function(t){var e=t.errorRef,c=Object(a.useState)(""),n=Object(o.a)(c,2),r=n[0],s=n[1],u=Object(a.useState)(""),l=Object(o.a)(u,2),d=l[0],b=l[1],f=Object(a.useRef)(),O=Object(a.useRef)(),v=Object(i.g)();return Object(m.jsxs)("div",{className:h.a.formAuth,children:[Object(m.jsx)("span",{className:h.a.formAuthName,children:"\u0412\u0445\u043e\u0434"}),Object(m.jsxs)("div",{className:h.a.blockInputData,children:[Object(m.jsx)("span",{children:"\u041b\u043e\u0433\u0438\u043d"}),Object(m.jsx)("input",{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443",onChange:function(t){s(t.target.value),f.current.classList.contains(h.a.errorInput)&&f.current.classList.remove(h.a.errorInput)},ref:f})]}),Object(m.jsxs)("div",{className:h.a.blockInputData,children:[Object(m.jsx)("span",{children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(m.jsx)("input",{type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:function(t){b(t.target.value),O.current.classList.contains(h.a.errorInput)&&O.current.classList.remove(h.a.errorInput)},ref:O})]}),Object(m.jsxs)("div",{className:h.a.blockActions,children:[Object(m.jsx)("div",{children:"\u0417\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f"}),Object(m.jsx)("div",{onClick:function(){r||f.current.classList.add(h.a.errorInput),d||O.current.classList.add(h.a.errorInput),r&&d&&function(t,e){return p.post("/auth/login",{username:t,password:e},{headers:{Authorization:j()}})}(r,d).then((function(t){var e=t.data.token_type[0].toUpperCase()+t.data.token_type.slice(1);!function(t,e){var c=new Date,a=e;c.setTime(c.getTime()+6048e5),document.cookie="".concat(t,"=").concat(a,"; expires=").concat(c.toUTCString(),"; path=/")}("accessToken","".concat(e," ").concat(t.data.access_token)),v.go(0)})).catch((function(){e.current.classList.add(h.a.errorAuthActive),f.current.classList.add(h.a.errorInput),O.current.classList.add(h.a.errorInput)}))},children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},v=function(){var t=Object(a.useRef)();return Object(m.jsxs)("div",{className:h.a.authPage,children:[Object(m.jsxs)("div",{className:h.a.blockAuth,children:[Object(m.jsxs)("div",{className:h.a.blockName,children:[Object(m.jsx)("img",{src:l,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"}),Object(m.jsx)("span",{children:"Need for drive"})]}),Object(m.jsx)(O,{errorRef:t})]}),Object(m.jsx)("div",{className:h.a.errorAuth,ref:t,children:"\u041f\u0440\u043e\u0438\u0437\u043e\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0437\u0430\u043d\u043e\u0432\u043e."})]})},g=function(t){var e=t.children,c=t.isAuthenticated,a=t.path;return Object(m.jsx)(i.b,{path:a,render:function(t){var a=t.location;return c?Object(m.jsx)(i.a,{to:{pathname:"/admin",state:{from:a}}}):e}})},x=function(t){var e=t.children,c=t.isAuthenticated,a=t.path;return Object(m.jsx)(i.b,{path:a,render:function(t){var a=t.location;return c?e:Object(m.jsx)(i.a,{to:{pathname:"/login",state:{from:a}}})}})},_=function(){return Object(m.jsx)("div",{children:Object(m.jsx)("h1",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"})})},A=function(){var t=Object(a.useState)(!1),e=Object(o.a)(t,2),c=e[0],n=e[1];Object(a.useEffect)((function(){r()}),[c]);var r=function(){var t;null===(t=f())||void 0===t||t.then((function(){return n(!0)})).catch((function(){return n(!1)}))};return Object(m.jsxs)(i.d,{children:[Object(m.jsx)(g,{path:"/login",isAuthenticated:c,children:Object(m.jsx)(v,{})}),Object(m.jsx)(x,{path:"/admin",isAuthenticated:c,children:Object(m.jsx)(_,{})}),Object(m.jsx)(i.a,{to:"/login"})]})},k=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,63)).then((function(e){var c=e.getCLS,a=e.getFID,n=e.getFCP,r=e.getLCP,s=e.getTTFB;c(t),a(t),n(t),r(t),s(t)}))},I=c(10);s.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(I.a,{children:Object(m.jsx)(A,{})})}),document.getElementById("root")),k()}},[[62,1,2]]]);
//# sourceMappingURL=main.322e7979.chunk.js.map